## Установка и запуск проекта

1. Клонирование репозитория:
   ```bash
   git clone https://github.com/borodichyulia/mediacube.git
2. Установка зависимостей Composer:
   ```bash
   composer install
3. Запуск Docker-контейнеров:
   ```bash
   docker-compose up -d
4. Отредактируйте `.env` файл, установив актуальные параметры
5. Применение миграций базы данных:
   ```bash
   php artisan migrate
6. Запуск сервера:
   ```bash
   php artisan serve

## Аутентификация и регистрация пользователей API

### Аутентификация
Доступ к API защищен с помощью `Bearer Token` авторизации.

### Подготовка к работе
1. Добавьте обязательные роли в таблицу `user_roles`:
    - `admin`
    - `user`

### Регистрация пользователя
`POST /api/register`

**Тело запроса:**
```json
{
    "name": "testName",
    "email": "test@example.com",
    "password": "testPassword",
    "password_confirmation": "testPassword"
}
```

### После регистрации:
Вручную установите `user_role_id = 1` (admin) для нового пользователя в таблице `users`

### Аутентификация пользователя
`POST /api/login`

**Тело запроса:**
```json
{
    "email": "test@example.com",
    "password": "testPassword"
}
```
## API для управления клиентами и ролями

### Создание роли клиента
`POST /api/clients/roles`

**Тело запроса:**
```json
{
    "name": "manager"
}
```
Возвращает созданную роль с полем `client_role_id`, которое требуется для последующих операций.

### Создание клиента
Чтобы создать клиента необходимо использовать `client_role_id` из результата предыдущего запроса

`POST /api/clients`

**Тело запроса:**
```json
{
    "name": "testClient",
    "client_role_id": 1
}
```

### Выход из системы
`POST /api/logout`

Завершает текущую сессию и аннулирует токен авторизации.


### API для работы с ролями клиентов
| Метод | Эндпоинт                  | Описание                   |
|-------|---------------------------|----------------------------|
| GET   | `/api/clients/roles`      | Получить список всех ролей |
| GET   | `/api/clients/roles/{id}` | Получить роль по ID        |
| PUT   | `/api/clients/roles/{id}` | Обновить данные роли       |
| DELETE| `/api/clients/roles/{id}` | Удалить роль               |

### API для работы с клиентами
| Метод | Эндпоинт               | Описание                          |
|-------|------------------------|-----------------------------------|
| GET   | `/api/clients`         | Получить список всех клиентов     | 
| GET   | `/api/clients/{id}`    | Получить клиента по ID            |
| PUT   | `/api/clients/{id}`    | Обновить данные клиента           |
| DELETE| `/api/clients/{id}`    | Удалить клиента                   |


## Тестовое покрытие
Некоторые случаи работы API покрыты:
- Интеграционными тестами
- Юнит-тестами

#### Затараченное время: 18 часов
